<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="SELECT statement" />
<meta content="SELECT statement, ORDER BY clause, needed to guarantee order of results" name="DC.subject" />
<meta content="SELECT statement, ORDER BY clause, needed to guarantee order of results" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj39374.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj22771.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj81859.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj95081.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj80721.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqljrenamestatements.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj35312.html" />
<meta scheme="URI" name="DC.Relation" content="rrefcallprocedure.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13590.html" />
<meta scheme="URI" name="DC.Relation" content="rrefdeclaretemptable.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35981.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj31783.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21583.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj32654.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj14854.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35034.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40774.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj29840.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj18922.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40506.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13658.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21571.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj57522.html" />
<meta scheme="URI" name="DC.Relation" content="rrefscalarsubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefselectexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftableexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftablesubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj26498.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj11277.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj33602.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj15309.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefsqlj41360" name="DC.Identifier" />
<meta content="en-us" name="DC.Language" />
<link href="commonltr.css" type="text/css" rel="stylesheet" />
<title>SELECT statement</title>
</head>
<body id="rrefsqlj41360"><a name="rrefsqlj41360"><!-- --></a>


<h1 class="topictitle1">SELECT statement</h1>


<div>
<div class="section"> <p>A SELECT statement consists of a query with an optional <a href="rrefsqlj13658.html#rrefsqlj13658">ORDER BY clause</a> and an optional <a href="rrefsqlj31783.html#rrefsqlj31783">FOR UPDATE clause</a>.
The SELECT statement is so named because the typical first word of the query
construct is SELECT. (<em>Query</em> includes the VALUES expression and UNION, INTERSECT, and EXCEPT
expressions as well as SELECT expressions).</p>
 <p>The <a href="rrefsqlj13658.html#rrefsqlj13658">ORDER BY clause</a> guarantees
the ordering of the <em>ResultSet</em>. The <a href="rrefsqlj31783.html#rrefsqlj31783">FOR UPDATE clause</a> makes
the result an updatable cursor. The SELECT statement supports the FOR FETCH
ONLY clause. The FOR FETCH ONLY clause is synonymous with the FOR READ ONLY
clause.</p>
<div class="remember"><span class="remembertitle">Remember: </span>In order to get an updatable ResultSet, you
must include a FOR UPDATE clause with the SELECT clause.</div>
</div>

<div class="section"><h4 class="sectiontitle">Syntax</h4> <pre><strong><em><a href="rrefsqlj21571.html#rrefsqlj21571">Query</a></em>
[<em><a href="rrefsqlj13658.html#rrefsqlj13658">ORDER BY clause</a></em>]
[<em><a href="rrefsqlj31783.html#rrefsqlj31783">FOR UPDATE clause</a></em>]
WITH {RR|RS|CS|UR}</strong></pre>
 <p>You can set the isolation level in a
SELECT statement using the WITH {RR|RS|CS|UR} syntax.</p>
 </div>

<div class="example"> <pre><strong><span>-- lists the names of the expression SAL+BONUS+COMM as TOTAL_PAY and
-- orders by the new name TOTAL_PAY</span>
 SELECT FIRSTNME, SALARY+BONUS+COMM AS TOTAL_PAY
     FROM EMPLOYEE
     ORDER BY TOTAL_PAY;
<span>-- creating an updatable cursor with a FOR UPDATE clause 
-- to update the start date (PRSTDATE) and the end date (PRENDATE)
-- columns in the PROJECT table</span>
SELECT PROJNO, PRSTDATE, PRENDATE
      FROM PROJECT
      FOR UPDATE OF PRSTDATE, PRENDATE;
<span>-- set the isolation level to RR for this statement only </span>
SELECT * 
FROM Flights 
WHERE flight_id BETWEEN 'AA1111' AND 'AA1112' 
WITH RR;</strong></pre>
 <div class="p">A SELECT statement returns a <em>ResultSet</em>.
A <em>cursor</em> is a pointer to a specific row in <em>ResultSet</em>. In Java
applications, all <em>ResultSets</em> are cursors. A cursor is updatable; that
is, you can update or delete rows as you step through the <em>ResultSet</em> if
the SELECT statement that generated it and its underlying query meet cursor
updatability requirements, as detailed below. You use a FOR UPDATE clause
when you want to generate an updatable cursor.   <div class="note"><span class="notetitle">Note: </span>The ORDER BY clause
allows you to order the results of the SELECT. Without the ORDER BY clause,
the results are returned in random order.</div>
</div>
<p>If a SELECT statement
meets the requirements listed below, cursors are updatable only if you specify
FOR UPDATE in the FOR clause (see <a href="rrefsqlj31783.html#rrefsqlj31783">FOR UPDATE clause</a>).</p>
 </div>

<div class="section" id="rrefsqlj41360__sqlj15384"><a name="rrefsqlj41360__sqlj15384"><!-- --></a><h4 class="sectiontitle">Requirements for updatable cursors and updatable
ResultSets</h4><div class="p">Only simple, single-table SELECT cursors and FORWARD_ONLY
ResultSets can be updatable. The SELECT statement for updatable ResultSets
has the same syntax as the SELECT statement for updatable cursors. To generate
updatable cursors:   <ul>
<li>The SELECT statement must not include an ORDER BY clause.</li>

<li>The underlying <em>Query</em> must be a <em><a href="rrefselectexpression.html#rrefselectexpression">SelectExpression</a>.</em></li>

<li>The <em><a href="rrefselectexpression.html#rrefselectexpression">SelectExpression</a></em> in
the underlying Query must not include:   <ul>
<li>DISTINCT</li>

<li>Aggregates</li>

<li>GROUP BY clause</li>

<li>HAVING clause</li>

</ul>
</li>

<li>The FROM clause in the underlying <em>Query</em> must not have:   <ul>
<li>more than one table in its FROM clause</li>

<li>anything other than one table name</li>

<li><em><a href="rrefselectexpression.html#rrefselectexpression">SelectExpression</a>s</em></li>

<li>subqueries</li>

</ul>
</li>

</ul>
</div>
 <p>There is no SQL language statement to <em>assign</em> a name to
a cursor. Instead, you use the JDBC API to assign names to cursors or retrieve
system-generated names. For more information, see  "Naming or Accessing the
Name of a Cursor" in Chapter 5 of the <cite><span><em>Derby Developer's Guide</em></span></cite>.</p>
 <p>Cursors
are read-only by default. For a cursor to be updatable, you must specify FOR
UPDATE in the FOR clause (see <a href="rrefsqlj31783.html#rrefsqlj31783">FOR UPDATE clause</a>).</p>
 </div>

<div class="section"><h4 class="sectiontitle">Statement dependency system</h4> <p>The SELECT depends
on all the tables and views named in the query and the conglomerates (units
of storage such as heaps and indexes) chosen for access paths on those tables.
CREATE INDEX does not invalidate a prepared SELECT statement. A DROP INDEX
statement invalidates a prepared SELECT statement if the index is an access
path in the statement. If the SELECT includes views, it also depends on the
dictionary objects on which the view itself depends (see <a href="rrefsqlj15446.html#rrefsqlj15446">CREATE VIEW statement</a>).</p>
 <p>Any
prepared UPDATE WHERE CURRENT or DELETE WHERE CURRENT statement against a
cursor of a SELECT depends on the SELECT. Removing a SELECT through a <em>java.sql.Statement.close </em>request
invalidates the UPDATE WHERE CURRENT or DELETE WHERE CURRENT.</p>
 <p>The SELECT
depends on all aliases used in the query. Dropping an alias invalidates a
prepared SELECT statement if the statement uses the alias.</p>
 </div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="crefsqlj39374.html" title="">Statements</a></div>
</div>
<div class="relconcepts"><strong>Related concepts</strong><br />
<div><a href="crefsqlj22771.html" title="">Interaction with the dependency system</a></div>
<div><a href="crefsqlj95081.html" title="">CREATE statements</a></div>
<div><a href="crefsqlj80721.html" title="">DROP Statements</a></div>
<div><a href="crefsqljrenamestatements.html" title="">RENAME statements</a></div>
<div><a href="crefsqlj35312.html" title="">SET statements</a></div>
</div>
<div class="relref"><strong>Related reference</strong><br />
<div><a href="rrefsqlj81859.html" title="">ALTER TABLE statement</a></div>
<div><a href="rrefcallprocedure.html" title="">CALL (PROCEDURE)</a></div>
<div><a href="rrefsqlj13590.html" title="">CONSTRAINT clause</a></div>
<div><a href="rrefdeclaretemptable.html" title="">DECLARE GLOBAL TEMPORARY TABLE statement</a></div>
<div><a href="rrefsqlj35981.html" title="">DELETE statement</a></div>
<div><a href="rrefsqlj31783.html" title="">FOR UPDATE clause</a></div>
<div><a href="rrefsqlj21583.html" title="">FROM clause</a></div>
<div><a href="rrefsqlj32654.html" title="">GROUP BY clause</a></div>
<div><a href="rrefsqlj14854.html" title="">HAVING clause</a></div>
<div><a href="rrefsqlj35034.html" title="">INNER JOIN</a></div>
<div><a href="rrefsqlj40774.html" title="">INSERT statement</a></div>
<div><a href="rrefsqlj29840.html" title="">JOIN operation</a></div>
<div><a href="rrefsqlj18922.html" title="">LEFT OUTER JOIN</a></div>
<div><a href="rrefsqlj40506.html" title="">LOCK TABLE statement</a></div>
<div><a href="rrefsqlj13658.html" title="">ORDER BY clause</a></div>
<div><a href="rrefsqlj21571.html" title="">Query</a></div>
<div><a href="rrefsqlj57522.html" title="">RIGHT OUTER JOIN</a></div>
<div><a href="rrefscalarsubquery.html" title="">ScalarSubquery</a></div>
<div><a href="rrefselectexpression.html" title="">SelectExpression</a></div>
<div><a href="rreftableexpression.html" title="">TableExpression</a></div>
<div><a href="rreftablesubquery.html" title="">TableSubquery</a></div>
<div><a href="rrefsqlj26498.html" title="">UPDATE statement</a></div>
<div><a href="rrefsqlj11277.html" title="">VALUES expression</a></div>
<div><a href="rrefsqlj33602.html" title="">WHERE clause</a></div>
<div><a href="rrefsqlj15309.html" title="">WHERE CURRENT OF clause</a></div>
</div>
</div>
</body>
</html>